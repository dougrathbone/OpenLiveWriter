<Project>
  <!-- 
    Shared build properties for Open Live Writer .NET 10 migration
    This file is automatically imported by all SDK-style projects in this directory tree
  -->

  <PropertyGroup>
    <!-- Target .NET 10 for Windows (required for Windows Forms and COM interop) -->
    <TargetFramework>net10.0-windows</TargetFramework>
    
    <!-- Enable Windows Forms -->
    <UseWindowsForms>true</UseWindowsForms>
    
    <!-- x86 platform required for COM interop with MSHTML -->
    <PlatformTarget>x86</PlatformTarget>
    
    <!-- Disable nullable reference types initially to avoid breaking changes -->
    <Nullable>disable</Nullable>
    
    <!-- Disable implicit usings to maintain compatibility with existing code -->
    <ImplicitUsings>disable</ImplicitUsings>
    
    <!-- Maintain existing warning/error behavior -->
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <WarningLevel>4</WarningLevel>
    <!-- Suppress obsolete API warnings during migration -->
    <NoWarn>$(NoWarn);SYSLIB0003</NoWarn> <!-- Code Access Security obsolete -->
    <!-- SYSLIB0011 (BinaryFormatter) - Localized to RegistryCodec.cs for backwards-compatible settings loading -->
    <NoWarn>$(NoWarn);SYSLIB0051</NoWarn> <!-- Formatter-based serialization obsolete (used in RegistryCodec legacy support) -->
    <!-- CA1416 - Platform compatibility: Open Live Writer targets net10.0-windows exclusively.
         The entire application is Windows-only, so platform warnings are suppressed as an architectural decision.
         P/Invoke classes have [SupportedOSPlatform("windows")] attributes for documentation purposes. -->
    <NoWarn>$(NoWarn);CA1416</NoWarn>
    <NoWarn>$(NoWarn);CS9191</NoWarn>     <!-- ref vs in parameter - minor code style -->
    <NoWarn>$(NoWarn);WFO1000</NoWarn>   <!-- WinForms property serialization - not needed for runtime -->
    <NoWarn>$(NoWarn);WFDEV006</NoWarn>  <!-- WinForms deprecated controls - ContextMenu, MenuItem -->
    <NoWarn>$(NoWarn);NU1701</NoWarn>    <!-- .NET Framework-only packages used (PlatformSpellCheck, etc.) -->
    <NoWarn>$(NoWarn);NU1603</NoWarn>    <!-- Package version substitution -->
    <NoWarn>$(NoWarn);NU1605</NoWarn>    <!-- Package downgrade warnings -->
    <!-- SYSLIB0009 (AuthenticationManager) - Localized to HttpRequestHelper.cs for WSSE support -->
    <!-- SYSLIB0014 (WebRequest) - Localized to specific files; HttpClientService provides modern alternative -->
    <NoWarn>$(NoWarn);SYSLIB0050</NoWarn> <!-- Type.IsSerializable obsolete -->
    <NoWarn>$(NoWarn);WFDEV004</NoWarn>  <!-- Form.Closed obsolete -->
    <NoWarn>$(NoWarn);WFO1001</NoWarn>   <!-- ITypedDataObject not implemented -->
    <NoWarn>$(NoWarn);CA2022</NoWarn>    <!-- Stream.Read warning -->
    
    <!-- Generate binding redirects for compatibility -->
    <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
    <GenerateBindingRedirectsOutputType>true</GenerateBindingRedirectsOutputType>
    
    <!-- Assembly signing configuration -->
    <!-- RepoRoot is the repository root directory (src/managed/../../ = repo root) -->
    <RepoRoot>$([MSBuild]::NormalizeDirectory('$(MSBuildThisFileDirectory)', '..', '..'))</RepoRoot>
    <SignAssembly Condition="'$(SignAssembly)' == ''">false</SignAssembly>
    <AssemblyOriginatorKeyFile Condition="'$(AssemblyOriginatorKeyFile)' == ''">$(RepoRoot)key.snk</AssemblyOriginatorKeyFile>
    
    <!-- Product information -->
    <Product>Open Live Writer</Product>
    <Company>.NET Foundation</Company>
    <Copyright>Copyright (c) .NET Foundation. All rights reserved.</Copyright>
    
    <!-- Disable auto-generation of assembly info (using existing GlobalAssemblyInfo.cs) -->
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    
    <!-- Suppress specific analyzers that may cause issues during migration -->
    <EnableNETAnalyzers>true</EnableNETAnalyzers>
    <AnalysisLevel>latest</AnalysisLevel>
  </PropertyGroup>

  <!-- Debug configuration -->
  <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <DebugType>full</DebugType>
    <DebugSymbols>true</DebugSymbols>
    <DefineConstants>$(DefineConstants);DEBUG;TRACE</DefineConstants>
    <Optimize>false</Optimize>
  </PropertyGroup>

  <!-- Release configuration -->
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <DebugType>pdbonly</DebugType>
    <DefineConstants>$(DefineConstants);TRACE</DefineConstants>
    <Optimize>true</Optimize>
  </PropertyGroup>

  <!-- Output paths to maintain compatibility with existing build structure -->
  <PropertyGroup>
    <AppendTargetFrameworkToOutputPath>false</AppendTargetFrameworkToOutputPath>
    <AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
  </PropertyGroup>


</Project>
